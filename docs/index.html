<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.2/angular.js"></script>

	<link rel="stylesheet" href="https://leeoniya.github.io/uPlot/dist/uPlot.min.css">
	<script src="https://leeoniya.github.io/uPlot/dist/uPlot.iife.min.js" defer></script>

	<script src="parse.js" defer></script>
	<script src="touchZoom.js" defer></script>
	<script src="draw.js" defer></script>
	<script src="index.js" defer></script>
	<link rel="stylesheet" href="index.css">
</head>

<body ng-app="App" ng-controller="world">
	<button ng-click="days.load(3)">
		3 Days
	</button>
	<button ng-click="days.load(7)">
		Week
	</button>
	<button ng-click="days.load(30)">
		Month
	</button>
	<input type="number" ng-model="add_value" ng-keyup="$event.keyCode == 13 && days.load(add_value)" placeholder="#Days"/>
	<br>
	<input type="text" ng-model="url" ng-keyup="$event.keyCode == 13 && store_url(url)" placeholder="webhook url"/>
	<button ng-click="download()">Download</button>

	<table>
		<tr>
			<th class="border">Date</th>
			<th class="border">Draw</th>
			<th class="border">Solar</th>
			<th class="border">Power test</th>
			<th class="border">Diagnostic</th>
			<th>Corrupted</th>
		</tr>

		<tr ng-repeat="day in days.store" class="tab">
			<td class="border">
				{{day.name}}
			</td>
			<td ng-if="day.status" colspan="5">{{day.status}}</td>
			<td ng-if="day.status == ''" class="border">
				<input
					type="checkbox"
					ng-model="day.draw_visible"
					ng-change="draw()"
				>
			</td>
			<td ng-if="day.status == ''" class="border">{{day.data.solar.date.length}}</td>
			<td ng-if="day.status == ''" class="border">{{day.data.power_test.date.length}}</td>
			<td ng-if="day.status == ''" class="border">{{day.data.diagnostic.date.length}}</td>
			<td ng-if="day.status == ''">{{day.corrupted}}</td>
		</tr>
	</table>

	<div id="Power" class="plot"></div>
	<div id="Voltage" class="plot"></div>
	<div id="Frequency" class="plot"></div>
	<div id="Buffer" class="plot"></div>
	<div id="Uptime" class="plot"></div>
</body>
